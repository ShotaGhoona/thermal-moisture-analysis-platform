# 壁とセルの関係：1D熱水分解析の基本構造

## 1. 基本概念

### 1.1 実際の壁と計算モデルの関係

```
【実際の壁】
┌─────────────────────────┐
│                         │ ← 5mm厚の壁
│      材料（土壁）        │
│                         │
└─────────────────────────┘
外気側                    室内側
```

```
【計算モデル】
外気側 ←→ 室内側
┌───┬───┬───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ ← 6個のセル(Cell)に分割
└───┴───┴───┴───┴───┴───┘
 ↑                       ↑
Cell[1]                Cell[6]
```

## 2. パラメータの詳細解説

### 2.1 L = 6（分割数）

**L = 6の意味：**
- 壁体を6個の微小要素（セル）に分割
- 各セルで温度・湿度を個別に計算
- セル間の熱・水分移動を計算

**分割の考え方：**
```
分割数が少ない場合（L=2）：
┌─────────┬─────────┐
│    1    │    2    │ ← 精度が悪い
└─────────┴─────────┘

分割数が適切な場合（L=6）：
┌───┬───┬───┬───┬───┬───┐
│ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ ← 適切な精度
└───┴───┴───┴───┴───┴───┘

分割数が多い場合（L=20）：
┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐
││││││││││││││││││││ ← 計算時間が長い
└┴┴┴┴┴┴┴┴┴┴┴┴┴┴┴┴┴┴┴┘
```

### 2.2 width = 0.005（壁厚）

**width = 0.005の意味：**
- 壁体全体の厚さ = 0.005m = 5mm
- 薄い壁（土壁の例）

**厚さと分割の関係：**
```
wall全体: 5mm
├─ Cell[1]: 約0.83mm
├─ Cell[2]: 約0.83mm  
├─ Cell[3]: 約0.83mm
├─ Cell[4]: 約0.83mm
├─ Cell[5]: 約0.83mm
└─ Cell[6]: 約0.83mm

5mm ÷ 6セル ≈ 0.83mm/セル
```

## 3. セル（Cell）構造体の詳細

### 3.1 各セルが持つ情報

```
Cell構造体の中身:
┌─────────────────────┐
│ 位置情報（i, dx, dx2） │ ← どこにあるか
├─────────────────────┤
│ 温度（temp）          │ ← 何度か
├─────────────────────┤  
│ 湿度（rh, miu）       │ ← どの程度湿っているか
├─────────────────────┤
│ 材料名（material_name）│ ← 何の材料か
├─────────────────────┤
│ 物性値（自動計算）     │ ← 熱伝導率、透湿率など
└─────────────────────┘
```

### 3.2 セル間の相互作用

```
熱の移動:
Cell[1] → Cell[2] → Cell[3] → ... → Cell[6]
   ↑熱流量(q)    ↑熱流量(q)

水分の移動:
Cell[1] → Cell[2] → Cell[3] → ... → Cell[6]
   ↑水分流量(jv,jl) ↑水分流量(jv,jl)
```

## 4. 境界条件との関係

### 4.1 完全なモデル構成

```
【完全な解析モデル】

BC_Robin     壁体（6セル）      BC_Robin
(外気側)                      (室内側)
   ↓                            ↓
┌─────┐ ┌───┬───┬───┬───┬───┬───┐ ┌─────┐
│外気 │→│ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │→│室内 │
│空気 │ │   │   │   │   │   │   │ │空気 │
└─────┘ └───┴───┴───┴───┴───┴───┘ └─────┘
  ↑                                ↑
対流熱伝達                      対流熱伝達
湿気伝達                        湿気伝達
```

### 4.2 target_modelの構成

```julia
target_model = [air_in, wall[1], wall[2], wall[3], 
                wall[4], wall[5], wall[6], air_out]

インデックス: [1]    [2]     [3]     [4]    
             [5]     [6]     [7]     [8]
```

## 5. 計算の流れ

### 5.1 時間発展計算

```
時刻 t=0:
┌─────┬───┬───┬───┬───┬───┬───┬─────┐
│外気 │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │室内 │
│10℃ │10℃│10℃│10℃│10℃│10℃│10℃│10℃ │ ← 初期状態
└─────┴───┴───┴───┴───┴───┴───┴─────┘

時刻 t=Δt後:
┌─────┬───┬───┬───┬───┬───┬───┬─────┐
│外気 │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │室内 │
│ 5℃ │8℃ │9℃ │10℃│10℃│10℃│11℃│15℃ │ ← 熱移動後
└─────┴───┴───┴───┴───┴───┴───┴─────┘
                ↑
              温度勾配が発生
```

### 5.2 セル寸法の詳細設定

```
dx（セル幅）の設定:
┌─────┬─────┬─────┬─────┬─────┬─────┐
│ dx1 │ dx2 │ dx3 │ dx4 │ dx5 │ dx6 │
└─────┴─────┴─────┴─────┴─────┴─────┘
  ↑                               ↑
端セル                          端セル
dx1 = width/(L-1)/2          dx6 = width/(L-1)/2
= 5mm/(6-1)/2 = 0.5mm       = 0.5mm

中央セル:
dx2 = dx3 = dx4 = dx5 = width/(L-1) = 1mm
```

## 6. なぜこの構造が必要か

### 6.1 物理現象の離散化

```
連続な現象 → 離散的な計算
┌─────────────────────────┐    ┌───┬───┬───┬───┬───┬───┐
│                         │ →  │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │
│    連続的な温度分布      │    │   │   │   │   │   │   │
│                         │    └───┴───┴───┴───┴───┴───┘
└─────────────────────────┘    各点で温度・湿度を計算
```

### 6.2 数値解析の基本

1. **微分方程式** → **差分方程式**
2. **連続空間** → **離散格子**
3. **無限小時間** → **有限時間刻み**

この構造により、複雑な熱水分移動現象をコンピュータで計算できるようになります。

## 7. 小型物置への応用例

### 7.1 実際の物置壁体

```
【実際の物置壁構成】
外気側 ←→ 室内側
┌─────┬─────────┬─────────┐
│金属 │ 断熱材  │ 内装材  │
│1mm  │ 50mm   │ 12mm   │
└─────┴─────────┴─────────┘

【計算モデル化】
┌─┬────┬────┬────┬────┬─┐
│1│ 2  │ 3  │ 4  │ 5  │6│
└─┴────┴────┴────┴────┴─┘
金属   断熱材    内装材

各セルに異なる材料物性を設定
```

この構造理解により、1D_calculation.ipynbの本質が見えてきます。