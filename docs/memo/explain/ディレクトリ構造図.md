# 熱水分同時移動解析標準プログラム ver2.3.1 ディレクトリ構造図

## 全体構造概要

```mermaid
graph TD
    A[熱水分同時移動解析標準プログラム ver2.3.1] --> B[メインプログラム群]
    A --> C[モジュール群]
    A --> D[入力データ群]
    A --> E[出力データ群]
    A --> F[ドキュメント群]
    
    B --> B1[1次元解析]
    B --> B2[3次元解析]
    B --> B3[ネットワーク解析]
    B --> B4[実習用サンプル]
    
    C --> C1[コア計算モジュール]
    C --> C2[材料物性データベース]
    C --> C3[補助機能モジュール]
    
    D --> D1[モデル設定ファイル]
    D --> D2[気象データ]
    D --> D3[ネットワーク設定]
    
    E --> E1[計算結果CSV]
    E --> E2[物性値出力]
    E --> E3[検証画像]
```

## 詳細ディレクトリ構造

```mermaid
graph LR
    Root[📁 熱水分同時移動解析標準プログラム ver2.3.1] --> Main[📁 メインプログラム]
    Root --> Module[📁 module]
    Root --> Input[📁 input_data]
    Root --> Output[📁 output_data]
    Root --> Picture[📁 picture]
    Root --> Files[📄 設定・ログファイル]
    
    Main --> Main1[📓 1D_calculation.ipynb]
    Main --> Main2[📓 3D_calculation.ipynb]
    Main --> Main3[📓 network_calculation.ipynb]
    Main --> Main4[📓 main_calc_multivent.ipynb]
    Main --> Main5[📓 case_washi_v1~v3.ipynb]
    Main --> Main6[📓 manual_1D_calculation.ipynb]
    Main --> Main7[📓 check_material_property.ipynb]
    
    Module --> Core[📁 コア機能]
    Module --> Material[📁 material_property]
    Module --> Function[📁 function]
    Module --> Data[📁 data_management]
    
    Core --> Core1[📄 transfer_in_media.jl]
    Core --> Core2[📄 building_network_model.jl]
    Core --> Core3[📄 cell.jl]
    Core --> Core4[📄 air.jl]
    Core --> Core5[📄 boundary_condition.jl]
    Core --> Core6[📄 room.jl]
    Core --> Core7[📄 wall.jl]
    Core --> Core8[📄 opening.jl]
    Core --> Core9[📄 climate.jl]
    
    Input --> Input1[📁 1D_model]
    Input --> Input2[📁 3D_data]
    Input --> Input3[📁 climate_data]
    Input --> Input4[📁 building_network_model]
    
    Files --> Files1[📄 logger.jl]
    Files --> Files2[📄 update_information.txt]
    Files --> Files3[📄 改善点.ipynb]
```

## メインプログラム詳細構造

```mermaid
graph TD
    MP[📓 メインプログラム] --> OneDim[1次元解析系]
    MP --> ThreeDim[3次元解析系]
    MP --> Network[ネットワーク系]
    MP --> Utility[ユーティリティ系]
    
    OneDim --> OD1[📓 1D_calculation.ipynb<br/>基本1次元計算]
    OneDim --> OD2[📓 case_washi_v1.ipynb<br/>和紙単層モデル]
    OneDim --> OD3[📓 case_washi_v2.ipynb<br/>和紙3層モデル]
    OneDim --> OD4[📓 case_washi_v3.ipynb<br/>和紙2層簡略モデル]
    OneDim --> OD5[📓 manual_1D_calculation.ipynb<br/>マニュアル実行版]
    
    ThreeDim --> TD1[📓 3D_calculation.ipynb<br/>3次元熱水分解析]
    
    Network --> NW1[📓 network_calculation.ipynb<br/>建物ネットワーク解析]
    Network --> NW2[📓 main_calc_multivent.ipynb<br/>多層室換気計算]
    
    Utility --> UT1[📓 check_material_property.ipynb<br/>物性値確認ツール]
    Utility --> UT2[📓 logger.ipynb<br/>ロギング機能]
    Utility --> UT3[📄 logger.jl<br/>ログ出力モジュール]
```

## モジュール詳細構造

```mermaid
graph TD
    Mod[📁 module] --> CoreMod[コア計算モジュール]
    Mod --> MatProp[📁 material_property<br/>材料物性データベース]
    Mod --> FuncMod[📁 function<br/>数値計算関数群]
    Mod --> DataMod[📁 data_management<br/>データ管理]
    
    CoreMod --> CM1[📄 transfer_in_media.jl<br/>💡 熱・水分移動計算<br/>フーリエ・フィック法則]
    CoreMod --> CM2[📄 building_network_model.jl<br/>🏢 建物全体モデル<br/>BNM構造体定義]
    CoreMod --> CM3[📄 cell.jl<br/>🔳 計算セル定義<br/>Cell構造体・基本操作]
    CoreMod --> CM4[📄 air.jl<br/>💨 空気状態管理<br/>温湿度状態の計算]
    CoreMod --> CM5[📄 boundary_condition.jl<br/>🚪 境界条件設定<br/>Robin・Neumann・Dirichlet]
    CoreMod --> CM6[📄 room.jl<br/>🏠 室内空間管理]
    CoreMod --> CM7[📄 wall.jl<br/>🧱 壁体構造管理]
    CoreMod --> CM8[📄 opening.jl<br/>🚪 開口・隙間管理]
    CoreMod --> CM9[📄 climate.jl<br/>🌤️ 外界気象管理]
    
    MatProp --> Traditional[伝統材料群]
    MatProp --> Modern[現代材料群]
    MatProp --> Special[特殊材料群]
    
    Traditional --> T1[📄 mud_wall.jl<br/>土壁物性]
    Traditional --> T2[📄 paper_washi*.jl<br/>和紙各種]
    Traditional --> T3[📄 tuff_motomachi*.jl<br/>凝灰岩]
    
    Modern --> M1[📄 concrete_goran.jl<br/>コンクリート]
    Modern --> M2[📄 ALC.jl<br/>軽量コンクリート]
    Modern --> M3[📄 glass_wool*.jl<br/>グラスウール]
    Modern --> M4[📄 plywood*.jl<br/>合板類]
    
    Special --> S1[📄 liquid_water.jl<br/>液体水]
    Special --> S2[📄 van_genuchten.jl<br/>土壌モデル]
    Special --> S3[📄 benchmark_EN15026.jl<br/>国際標準材料]
    
    FuncMod --> F1[📄 flux_and_balance_equation.jl<br/>流量・収支計算]
    FuncMod --> F2[📄 lewis_relation.jl<br/>Lewis関係式]
    FuncMod --> F3[📄 vapour.jl<br/>水蒸気物性]
```

## 入力データ詳細構造

```mermaid
graph TD
    Input[📁 input_data] --> OneDData[📁 1D_model<br/>1次元モデル設定]
    Input --> ThreeDData[📁 3D_data<br/>3次元データ]
    Input --> ClimateData[📁 climate_data<br/>気象データ]
    Input --> BNMData[📁 building_network_model<br/>ネットワーク設定]
    
    OneDData --> OD1[📄 case_washi_v1.csv<br/>和紙v1モデル]
    OneDData --> OD2[📄 case_washi_v2.csv<br/>和紙v2モデル]
    OneDData --> OD3[📄 case_washi_v3.csv<br/>和紙v3モデル]
    OneDData --> OD4[📄 wall*.csv<br/>壁体構成ファイル]
    OneDData --> OD5[📄 WG_benchmark*.csv<br/>検証用データ]
    
    ThreeDData --> TD1[📁 2D_property_data<br/>2次元断面データ]
    ThreeDData --> TD2[📄 dx_data.csv<br/>X軸分割情報]
    ThreeDData --> TD3[📄 dy_data.csv<br/>Y軸分割情報]
    ThreeDData --> TD4[📄 dz_data.csv<br/>Z軸分割情報]
    ThreeDData --> TD5[📄 property_information.csv<br/>材料特性情報]
    ThreeDData --> TD6[📄 size_data.xlsx<br/>寸法データ]
    
    ClimateData --> CD1[📁 case_Washi<br/>和紙ケース用気象]
    ClimateData --> CD2[📄 climate_data_*.csv<br/>各地気象データ]
    ClimateData --> CD3[📁 old_data<br/>過去データ]
    
    CD1 --> CD1a[📄 Indoor.csv<br/>室内環境データ]
    CD1 --> CD1b[📄 Airlayer.csv<br/>中空層データ]
    
    BNMData --> BNM1[📄 room_condition.csv<br/>室条件設定]
    BNMData --> BNM2[📄 wall_condition.csv<br/>壁条件設定]
    BNMData --> BNM3[📄 opening_condition.csv<br/>開口条件設定]
    BNMData --> BNM4[📁 cell_data<br/>セル詳細データ]
    
    BNM4 --> BNM4a[📄 wall*.csv<br/>壁体詳細構成]
    BNM4 --> BNM4b[📄 ceiling*.csv<br/>天井構成]
    BNM4 --> BNM4c[📄 floor*.csv<br/>床構成]
    BNM4 --> BNM4d[📄 roof*.csv<br/>屋根構成]
```

## 出力データ構造

```mermaid
graph TD
    Output[📁 output_data] --> Results[計算結果ファイル]
    Output --> Materials[📁 material property<br/>物性値出力]
    
    Results --> R1[📄 result_case_Washi*.csv<br/>和紙ケース結果]
    Results --> R2[📄 result_WG_benchmark*.csv<br/>ベンチマーク結果]
    Results --> R3[📄 result_sample*.csv<br/>サンプル結果]
    
    Materials --> M1[📄 ALC.csv<br/>ALC物性値]
    Materials --> M2[📄 concrete_goran.csv<br/>コンクリート物性値]
    Materials --> M3[📄 metal_plate.csv<br/>金属プレート物性値]
```

## 計算フロー図

```mermaid
flowchart TD
    Start([プログラム開始]) --> Setup[環境設定・モジュール読み込み]
    Setup --> ModelDef[解析モデル定義]
    
    ModelDef --> OneDSetup{解析次元}
    OneDSetup -->|1次元| OneDFlow[1次元計算フロー]
    OneDSetup -->|3次元| ThreeDFlow[3次元計算フロー]
    OneDSetup -->|ネットワーク| NetworkFlow[ネットワーク計算フロー]
    
    OneDFlow --> LoadData1D[1Dモデルデータ読み込み]
    LoadData1D --> LoadClimate[気象データ読み込み]
    LoadClimate --> InitCond[初期条件設定]
    InitCond --> TimeLoop{時間ループ}
    
    TimeLoop --> CalcFlux[熱・水分流量計算]
    CalcFlux --> CalcBalance[収支計算・新値更新]
    CalcBalance --> Output1D[結果出力]
    Output1D --> TimeCheck{終了時刻?}
    TimeCheck -->|No| TimeLoop
    TimeCheck -->|Yes| End1D[1D計算終了]
    
    ThreeDFlow --> Load3D[3Dデータ読み込み]
    Load3D --> Create3D[3Dセル配列構築]
    Create3D --> Calc3D[3方向連成計算]
    Calc3D --> Visual3D[3D可視化]
    Visual3D --> End3D[3D計算終了]
    
    NetworkFlow --> LoadBNM[BNMデータ読み込み]
    LoadBNM --> BuildNetwork[ネットワーク構築]
    BuildNetwork --> CalcVent[換気計算]
    CalcVent --> CalcCoupled[連成解析]
    CalcCoupled --> OutputBNM[ネットワーク結果出力]
    OutputBNM --> EndBNM[ネットワーク計算終了]
    
    End1D --> FinalOutput[最終結果整理]
    End3D --> FinalOutput
    EndBNM --> FinalOutput
    FinalOutput --> Complete([計算完了])
```

## プログラム利用者向け構造図

```mermaid
graph LR
    User[👤 利用者] --> Choose{利用目的}
    
    Choose -->|基礎学習| Basic[📚 基礎学習コース]
    Choose -->|研究応用| Research[🔬 研究応用コース]
    Choose -->|実務応用| Practice[🏢 実務応用コース]
    
    Basic --> BasicFlow[1D_calculation.ipynb<br/>↓<br/>case_washi_v1~v3.ipynb<br/>↓<br/>パラメータ変更実験]
    
    Research --> ResearchFlow[材料物性調査<br/>↓<br/>3D_calculation.ipynb<br/>↓<br/>独自モデル開発]
    
    Practice --> PracticeFlow[network_calculation.ipynb<br/>↓<br/>実建物モデル作成<br/>↓<br/>性能評価・設計支援]
    
    BasicFlow --> Documentation[📋 進捗報告書作成]
    ResearchFlow --> Paper[📄 研究論文・発表]
    PracticeFlow --> Report[📊 設計報告書]
```

## ファイル機能分類

```mermaid
graph TD
    Files[📁 全ファイル] --> Executable[🔧 実行可能ファイル]
    Files --> Data[📊 データファイル]
    Files --> Config[⚙️ 設定ファイル]
    Files --> Output[📤 出力ファイル]
    Files --> Document[📚 ドキュメント]
    
    Executable --> Jupyter[📓 Jupyter Notebook<br/>.ipynb ファイル]
    Executable --> Julia[📄 Juliaモジュール<br/>.jl ファイル]
    
    Data --> InputCSV[📄 入力CSVファイル<br/>モデル・気象データ]
    Data --> InputXLSX[📄 Excel ファイル<br/>3次元形状データ]
    
    Config --> MaterialProp[📄 材料物性定義<br/>.jl ファイル]
    Config --> BoundaryConfig[📄 境界条件設定<br/>.csv ファイル]
    
    Output --> ResultCSV[📄 計算結果<br/>result_*.csv]
    Output --> Images[🖼️ グラフ・図表<br/>.png ファイル]
    
    Document --> Manual[📋 マニュアル<br/>update_information.txt]
    Document --> UserGuide[📖 利用説明書<br/>.md ファイル]
```

---

## 補足説明

### アイコンの意味
- 📁: フォルダ
- 📓: Jupyter Notebook
- 📄: Juliaファイル・CSVファイル
- 🔧: 実行可能プログラム
- 📊: データファイル
- 🏢: 建物・ネットワーク関連
- 💡: 計算アルゴリズム
- 🌤️: 気象・環境関連

### 重要度による色分け
- **赤色**: 最重要（初学者が最初に触るファイル）
- **青色**: 重要（応用・発展学習用）
- **緑色**: 補助（設定・データファイル）
- **灰色**: 参考（ドキュメント・ログ）

この構造図により、プログラムの全体像と各ファイルの役割・関係性を視覚的に理解できます。